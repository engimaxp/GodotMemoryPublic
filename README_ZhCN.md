# Godot Memory

## 前言

这是一个为了从Godot3 向Godot4跨越的学习项目，同时也为了解决目前3、4版本切换过程中的使用不便，碍于自身水平有限，目前可能有些设计不周或bug存在，敬请谅解。如有问题请在评论区留言反馈，谢谢。

## 引擎

- 添加引擎
    - 在**引擎路径**输入或者通过文件对话框选中后，通过扫描-version指令，自动识别**版本**
    - 自动识别**终端执行文件**，录入终端目录的引擎，可在列表页通过终端启动
    - 引擎可以设置**默认**，Godot3 Godot4均设置一个默认引擎，可在后续扫描导入项目时自动填充
    - 如果引擎有编译加密密钥，可以将加密密钥录入，列表页有按钮可以**一键拷贝密钥**
    - 标签系统：
        - 以下所有标签系统实现方式是一样的，目前不支持标签的删除，**一旦标签添加，sqlite数据库就会有相应条目**，如果要删除，需要借助Sqlite管理软件删除
        - 在**设置**栏目中设置过快速标签，在**快速标签栏**中会显示出来
        - 对于已经录入的标签，输入过程中等待3秒会有**自动补全**
        - 已添加的标签会设置一个**默认随机颜色**，点击颜色选择器可以**重新设置颜色**
        - 鼠标悬停在已选择标签上，**显示删除按钮**，点击可以**对该引擎删除该标签**（标签仍然在库里，在自动补全中会被查询到）
- 浏览引擎
    - 在**搜索**框输入内容后回车可以根据：**版本、名称**模糊搜索，标签搜索的使用方式类似添加引擎时的使用方式
    - 搜索栏最右侧的数字代表当前**搜索条件下的条目数**和**库中的总条目数**
    - 切换标签页不会消除当前标签页状态，搜索条件变化时所有内容都会刷新
    - **删除引擎**功能只会逻辑删除，**数据仍然会保留在库中**，只是查询的时候过滤掉了(下同)

## 项目

- 新增项目
    - 项目目录输入或者通过目录对话框选中后，**自动读取godot.project**文件内容，识别**项目名称、版本、图标**
    - **选择引擎**会根据主版本筛选出合适的引擎列表，根据项目需求再进行选择
    - 预览图选择（下同）：
        - 支持**扫描**导入预览，或通过**文件拖拽**形式导入
        - 扫描路径为**project.godot同级目录所有图片** 和 **截屏路径，且日期为当天的所有图片**
        - 通过鼠标点击选中图片，点击确定选择，按住鼠标左键不放滑动鼠标可以快速多选图片
        - 鼠标悬停图片上方时可以原图预览图片，点击鼠标可以关闭放大预览
        - 点击**黄色图片按钮**可以重新选择已经选中的图片
    - 点击**确定**保存新项目时，工具会自动将所选图片拷贝到GodotMemroy同级的**data/cache/img**目录，并以此作为后续读取图片目录，所以原图删除不会影响使用
- 浏览项目
    - 扫描项目
        - **递归读取**目标路径下的所有project.godot文件，使用**默认**Godot引擎作为启动引擎，不会自动设置**标签或者预览图**
        - 鉴于有个别早期项目可能修改了project.godot文件格式或有缺失等原因，可能导致扫描报错，**扫描可能会异常中断，程序闪退**，可通过终端查看报错内容，目前已知有项目没有设置项目图标，程序已经做了特殊判断，会使用默认godot版本图标作为项目图标
        - 扫描会**根据目录地址进行重复判断**，最终会以气泡提示已扫描多少项目，多少重复项目，多少不支持项目（没设置godot3 godot4 默认引擎，扫描到对应项目会找不到可使用引擎），因为我不知道怎么读取godot3项目的版本，所以**所有godot3 项目都会判断为godot 3.5**
    - 浏览项目
        - 可以通过**切换显示**，在**预览图片**和**项目信息**间进行切换，鼠标悬停预览图片可以放大预览，同样点击会消除预览
        - 项目可能会变更，比如项目名称、图标、版本等，可以点击**刷新**重新识别（目前没测试过，可能有bug）
        - **收藏**项目，可以让该项目置顶，默认将以添加顺序排序

## 资产

- 新增资产
    - 资产中有**链接**录入，方便快速找到资产来源
    - **版权信息** 可以录入版权内容，方便项目中收集 Credit 等目的使用
    - 其它内容同上
- 浏览资产
    - 资产内容中**快速拷贝**版权信息

## 工具

- 新增工具
    - 选中执行文件后会自动**扫描同级目录下的icon图标**作为工具图标，大小写不敏感
    - 如果没有扫描到，可以通过**点击icon图标选择对应的图标文件**
    - 如果工具没有图标，则会使用默认图标
- 浏览工具
    - 同上

## 设置

- 语言选择
    - 目前支持中、英文切换，切换后最好**重启工具**
- 默认启动栏目
    - 可以根据自己习惯设置启动栏目：引擎、项目、资产、工具、设置
- 按照自己需要设置每个模块的快速标签，使用规则同上

## 问题

目前大量的输入校验都是缺失的，所以不要测试，**定期对data文件夹**进行备份

如果搞坏了，可以把备份的data文件夹替换回来

所有缓存图片都做了**md5去重校验**，同名且相同的文件**不会重复拷贝**，同名不同的文件会以原名+uuid的形式添加到缓存文件夹里

## 源码

你可以随意修改自己使用，代码量相对较少，表结构也较为简单
